<div
  class="overlay"
  [class]="{ visible: (taskService.isTaskPopup$ | async) }"
  (click)="closePopup()"
>
  <form
    action="#"
    class="form"
    [formGroup]="taskForm"
    (ngSubmit)="createTask()"
    (click)="stopPropagation($event)"
  >
    <div class="title-container">
      <input
        type="text"
        class="input"
        id="title-task"
        formControlName="title"
        placeholder="{{ 'boardPage.tittleTask' | transloco }}"
      />
      <p class="validate">
        {{ errorMessagesService.showMessages(taskForm, 'title', messages['title']) | transloco }}
      </p>

      <textarea
        type="text"
        class="textarea"
        id="description-task"
        formControlName="description"
        placeholder="{{ 'boardPage.descriptionTask' | transloco }}"
      ></textarea>
      <p class="validate">
        {{
          errorMessagesService.showMessages(taskForm, 'description', messages['description'])
            | transloco
        }}
      </p>
      <mat-form-field appearance="fill">
        <mat-label>{{ 'boardPage.performers' | transloco }}</mat-label>
        <mat-select formControlName="userId">
          <mat-option *ngFor="let user of users | async" [value]="user.id">{{
            user.name
          }}</mat-option>
        </mat-select>
      </mat-form-field>
      <p class="validate">
        {{ errorMessagesService.showMessages(taskForm, 'userId', messages['userId']) | transloco }}
      </p>
      <mat-checkbox *ngIf="!isNewTask" class="example-margin title" formControlName="done">{{
        'editTask.done' | transloco
      }}</mat-checkbox>
    </div>

    <button class="button" [disabled]="taskForm.invalid">
      {{ 'boardPage.newTaskBtn' | transloco }}
    </button>
  </form>
</div>
